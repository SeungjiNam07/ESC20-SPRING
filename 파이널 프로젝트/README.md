# 20-1 ESC FINAL PROJECT

#### 학술부장 강경훈



### 1. 데이터 소개 (택 1)

각 조마다 아래 주어진 데이터 중 하나를 선택합니다.

#### Regression: 서울 주민 가구원 행복도

* 45496행, 203열, Target 'Q4B' (0~100 사이 주관적인 행복지수)
* Train-Test split 7 대 3 (train만 제공)
* 결측치 없음
* 당신은 서울시 주민행복기획단에 빅데이터 자문위원으로 고용되었습니다. 당신의 역할은 가구원 대상 설문지를 바탕으로 가구원의 행복도를 예측하는 모델을 만들고, 결과에 대해 기획단에 설명하는 것입니다. 기획단이 당신에게 기대하는 바는 다음과 같습니다.
  1. 가구원의 소득, 계층, 주거환경 등 다양한 변수가 서로 어떤 관련이 있는가?
  2. 가구원의 소득, 계층, 주거환경 등 다양한 변수를 바탕으로 행복도를 예측할 수 있는가?
  3. 가구원의 행복도를 제고하기 위해 어떻게 해야 하는가?

* 평가기준 (예시):
  * (Feature Extraction) 설명변수의 분포, 다중공선성, 단위 차이, 잠재 변수 등을 고려하였는가?
  * (모델 선정) 모델을 선정한 근거를 잘 설명하였는가?
  * (모델 Sparsity) 모델에 필요한 변수의 개수
  * (예측 성능) Test set에서의 MSE (미미한 차이까지 반영하지 않음)
* *주의사항: 설문지 대답을 단순 기입한 자료이므로 특별한 처리가 필요할 수 있다. (ex. 복수응답의 처리)*



#### Classification: 재무상태표와 2년 후 파산 여부

* 9792행, 65열, Taget 'class' (파산 기업 1, 정상 기업 0)

* Train-Test split 7 대 3 (stratified split, train만 제공)

* 결측치 없음

* 당신은 시중은행 여신담당부서에 데이터 분석 직군으로 입사한 신입사원입니다. 당신의 역할은 기업의 재무상태표를 보고 파산 확률을 예측해 여신 여부를 결정하는 것입니다. 당신의 상사가 당신에게 기대하는 바는 다음과 같습니다.

  1. 기업의 재무상태표, 손익계산서, 현금흐름표 등 각종 항목이 서로 어떤 관련이 있는가?
  2. 기업의 2년 후 파산 여부를 재무상태표 항목으로 보고 예측할 수 있는가?
  3. 기업의 재무상태표에서 여신 여부를 결정하기 위해 무엇을 중점으로 봐야 하는가?

* 평가기준 (예시):

  * (Feature Extraction) 설명변수의 분포, 다중공선성, 단위 차이, 잠재 변수 등을 고려하였는가?

  * (모델 선정) 모델을 선정한 근거를 잘 설명하였는가?

  * (모델 Sparsity) 모델에 필요한 변수의 개수

  * (예측 성능) Test set에서의 f-score (Precision과 Recall의 Harmonic mean)
    *Precision: P(진짜파산|파산예측), Recall: P(파산예측|진짜파산)
    아무나 파산한다고 하면 Precision이 줄 것이고, 엔간하면 파산 안 한다하면 Recall이 줄 것이고..*

    (https://en.wikipedia.org/wiki/Precision_and_recall)
    (https://deepai.org/machine-learning-glossary-and-terms/f-score)
    (https://deepai.org/machine-learning-glossary-and-terms/precision-and-recall)

* *주의사항: 데이터에 파산한 기업의 비율이 적은 imbalanced case이며, 은행의 관심사는 파산할 회사를 제대로 예측하는 것이다. 때문에 모델 간 ROC 커브를 비교할 필요가 있다.*

  * (https://developers.google.com/machine-learning/crash-course/classification/roc-and-auc)
  * (https://scikit-learn.org/stable/auto_examples/model_selection/plot_roc_crossval.html#sphx-glr-auto-examples-model-selection-plot-roc-crossval-py)



### 2. 과업 소개



#### 1주차: Pre-processing / Feature Extraction / Visualization

데이터 분석 이전에 데이터의 개형을 파악하고 직관을 얻는 단계입니다. 해야할 일은 다음과 같습니다. **(주의: 변수 선택 단계가 아닙니다! 변수 선택은 모델을 세우고 난 후에 진행합니다!)**

* **Pre-processing**: 데이터의 특성상 전처리가 필요한 경우가 있습니다. 이를 모두 고려하여 데이터를 바로 분석에 쓸 수 있도록 행벡터와 열벡터로 재정의하는 작업입니다. (예, 범주형 변수의 코딩 등) 또한 데이터의 분포와 단위 차이를 모두 고려하여 적절하게 변환 및 스케일링을 해야 합니다. 모든 변수의 분포가 같을 필요는 없지만, 같은 단위에 있는 것이 바람직합니다.

* **Feature Extraction**: 데이터의 특성상 여러 변수를 합쳐서 새로운 변수를 만들 필요가 있을 것입니다. 예컨대 한 변수가 가구 당 침대의 개수고, 다른 변수가 가구 당 구성원의 명수라면, 구성원 당 침대의 개수로 새로운 변수를 만드는 것이 더 용이합니다. 또한 만일 변수들끼리 상관관계가 높다면, 잠재변수를 바탕으로 새로운 변수를 만들 수도 있습니다. 
* **Visualization**: 데이터의 분포를 눈으로 파악하는 것이 직관을 줄 수 있습니다. 설명변수와 응답변수 간, 혹은 설명변수 간의 산점도를 그려 선형/비선형 관계를 파악하거나, 데이터 이해에 도움이 되는 시각화를 해봅니다.

이제 모델을 세우기 위한 모든 준비는 끝났습니다.



#### 2주차: Model Training / Selection / Evaluation

target 변수와 전  주에서 준비한 설명변수를 종합적으로 고려하여 하나의 모델을 만듭니다.

* **Training**: 사용 가능한 모든 모델을 동원하여 모델을 학습하고 결과를 해석합니다.
* **Selection**: 모델 설렉션의 의미는 크게 2 가지입니다. 모델의 CV 에러(Bias - Variance Tradeoff), 모델의 해석 가능 여부 등을 고려합니다. 
  1. 모델 자체의 선택: 예컨대 로지스틱 회귀를 쓸지, SVM을 쓸지, Random Forest를 쓸지, 혹은 이 모두를 함께 쓰는 Voting Classifier를 쓸지 결정합니다.
  2. 모델 내 변수의 선택: 어떤 변수를 쓸지, 변수의 어떤 basis expansion (polynomial, Gaussian 등)을 쓸지, 어떤 잠재변수를 고려할지 등을 결정합니다.
* **Evaluation**: 모델의 예측 성능을 평가하고, 가능하다면 모델을 해석합니다. **주민 행복도와 파산 여부는 예측도 잘 해야하지만 그에 못지 않게 어떤 변수가 중요한지도 설명도 필요한 데이터**입니다. 예컨대 어떤 변수가 중요한지 로지스틱 회귀의 계수, Random Forest의 feature importance 등을 근거로 제시하고, 그 이유를 해석합니다.  예컨대 기업의 매출채권회수율이 높아지면 파산 확률이 높아지는데, 이는 자금 사정이 좋지 않아 유동자산을 매각하기 때문일 것이다, 소득 수준이 높아도 가정 환경이 안 좋으면 행복도가 높지 않다 등. (실무에서 성과를 결정하는 부분이 아닐까 싶습니다.)
  * **Test MSE/ f-score 계산은 2주차 발표 직전에 제가 드리는 test set에서 수행합니다! 데이터를 raw로 받았을 때 바로 Test MSE/ f-score를 계산할 수 있도록 설명변수에 한 모든 전처리에 대한 코드를 남겨놓으셔야 해요!**



## 화이팅^^

